<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora do 2¬∫ Grau com Gr√°fico</title>
<style>
  * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
  body {
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    padding: 20px;
  }
  .container {
    background: #1e293b;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 0 20px #00000080;
    width: 400px;
    text-align: center;
  }
  h1 {
    color: #00ffc8;
    font-size: 1.4em;
    margin-bottom: 15px;
  }
  input {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background: #334155;
    color: #00ffc8;
    font-size: 1em;
  }
  button {
    margin-top: 15px;
    width: 100%;
    padding: 12px;
    border: none;
    background: #00b894;
    color: white;
    font-size: 1em;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover { background: #00e6b8; }
  .resultado {
    margin-top: 20px;
    background: #0f172a;
    border-radius: 10px;
    padding: 10px;
    min-height: 80px;
    font-size: 0.95em;
    line-height: 1.6;
  }
  canvas {
    background: #0f172a;
    border-radius: 10px;
    margin-top: 20px;
  }
  .footer {
    text-align: center;
    font-size: 0.8em;
    margin-top: 10px;
    color: #94a3b8;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Equa√ß√£o do 2¬∫ Grau</h1>
    <input type="text" id="equacao" placeholder="Ex: 2x¬≤ + 3x - 5 = 0">
    <button onclick="calcular()">Calcular e Mostrar Gr√°fico</button>
    <div class="resultado" id="resultado">Digite a equa√ß√£o e clique em Calcular.</div>
    <canvas id="grafico" width="350" height="250"></canvas>
    <div class="footer">Desenvolvido por Bernard</div>
  </div>

<script>
function calcular() {
  const entrada = document.getElementById("equacao").value.replace(/\s+/g, '');
  const res = document.getElementById("resultado");
  const canvas = document.getElementById("grafico");
  const ctx = canvas.getContext("2d");

  // Express√£o regular para ax¬≤ + bx + c = 0
  const regex = /^([+-]?\d*\.?\d*)x(?:\^2|¬≤)([+-]?\d*\.?\d*)x([+-]?\d*\.?\d*)=0$/;
  const match = entrada.match(regex);

  if (!match) {
    res.innerHTML = "‚ö†Ô∏è Equa√ß√£o inv√°lida! Use o formato: <br><b>ax¬≤ + bx + c = 0</b>";
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    return;
  }

  // Extrai coeficientes
  let a = parseFloat(match[1] || 1);
  let b = parseFloat(match[2] || 0);
  let c = parseFloat(match[3] || 0);
  if (isNaN(a)) a = 1;
  if (isNaN(b)) b = 0;
  if (isNaN(c)) c = 0;

  const delta = b*b - 4*a*c;
  let x1, x2;
  if (delta < 0) {
    res.innerHTML = `a = ${a}<br>b = ${b}<br>c = ${c}<br><br>Œî = ${delta.toFixed(4)}<br><b>Sem ra√≠zes reais.</b>`;
  } else {
    x1 = (-b + Math.sqrt(delta)) / (2*a);
    x2 = (-b - Math.sqrt(delta)) / (2*a);
    res.innerHTML = `
      üîπ a = <b>${a}</b><br>
      üîπ b = <b>${b}</b><br>
      üîπ c = <b>${c}</b><br><br>
      Œî = <b>${delta.toFixed(4)}</b><br><br>
      üßÆ x‚ÇÅ = <b>${x1.toFixed(4)}</b><br>
      üßÆ x‚ÇÇ = <b>${x2.toFixed(4)}</b>
    `;
  }

  // === GR√ÅFICO ===
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const w = canvas.width;
  const h = canvas.height;
  const scaleX = 30;  // zoom no eixo X
  const scaleY = 20;  // zoom no eixo Y
  const originX = w / 2;
  const originY = h / 2;

  // Eixos
  ctx.strokeStyle = "#555";
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(0, originY);
  ctx.lineTo(w, originY);
  ctx.moveTo(originX, 0);
  ctx.lineTo(originX, h);
  ctx.stroke();

  // Curva
  ctx.strokeStyle = "#00ffc8";
  ctx.lineWidth = 2;
  ctx.beginPath();
  for (let px = -originX; px <= originX; px++) {
    const x = px / scaleX;
    const y = a*x*x + b*x + c;
    const py = originY - y*scaleY;
    const plotX = originX + px;
    if (px === -originX) ctx.moveTo(plotX, py);
    else ctx.lineTo(plotX, py);
  }
  ctx.stroke();

  // Pontos das ra√≠zes
  if (delta >= 0) {
    ctx.fillStyle = "#ff006e";
    ctx.beginPath();
    ctx.arc(originX + x1*scaleX, originY, 5, 0, 2*Math.PI);
    ctx.arc(originX + x2*scaleX, originY, 5, 0, 2*Math.PI);
    ctx.fill();
  }
}
</script>
</body>
</html>
